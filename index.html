<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Weekly Credit Calculator</title>
  <link rel="manifest" href="manifest.json">
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      background: #f4f4f4;
    }
    .container {
      max-width: 500px;
      margin: 0 auto;
      background: white;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }
    h2 {
      text-align: center;
    }
    label {
      display: block;
      margin-top: 15px;
    }
    input[type="number"] {
      width: 100%;
      padding: 8px;
      margin-top: 5px;
      border-radius: 6px;
      border: 1px solid #ccc;
    }
    .output {
      margin-top: 20px;
      padding: 10px;
      background: #eef;
      border-radius: 6px;
    }
    .warning {
      background: #ffeeba;
      padding: 10px;
      border-radius: 6px;
      margin-top: 10px;
      border: 1px solid #f0ad4e;
    }
    .disclaimer {
      background: #fff89a;
      padding: 10px;
      border-radius: 6px;
      border: 1px solid #ffeeba;
      margin-top: 10px;
      font-size: 0.95em;
    }
    .footer-disclaimer {
      margin-top: 20px;
      font-size: 0.9em;
      color: #555;
      text-align: center;
    }
    .plan-link {
      color: blue;
      cursor: pointer;
      text-decoration: underline;
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>Weekly Credit Calculator</h2>
    <div class="disclaimer">
      This calculator is designed for students who plan to graduate this school year.
      <br><br>
      If you‚Äôre planning to graduate next year or later, you can still use it to set a credit goal for the school year or semester.
      <br><br>
      Talk with your teacher to decide how many credits to aim for, then use that number in the calculator.
    </div>

    <label for="totalCredits">How many credits do you need to finish?</label>
    <input type="number" id="totalCredits" min="1" max="100" required>

    <label for="startWeek">What week are you starting from? (1‚Äì52)</label>
    <input type="number" id="startWeek" min="1" max="52" value="1">

    <label for="endWeek">Which week do you want to finish by? (1‚Äì52)</label>
    <input type="number" id="endWeek" min="1" max="52" value="46">

    <button onclick="calculateCredits()" id="calculateBtn" style="margin-top: 20px; width: 100%; padding: 10px;">Calculate</button>

    <div class="output" id="result"></div>

    <div class="footer-disclaimer">
      <strong>Disclaimer:</strong> This calculator is a helpful planning tool, but it's important to double-check your credit totals and the number of weeks you have. If you're not sure, talk with your teacher or school counselor to go over your plan.
    </div>
  </div>

  <script>
    function openPlanSchedule(planType, totalCredits, startWeek, endWeek) {
      const newTab = window.open('', '_blank');
      const title = `My Credit Plan - ${planType}`;
      const weeks = endWeek - startWeek + 1;
      let tableRows = '';

      for (let i = 0; i < weeks; i++) {
        const weekNum = startWeek + i;
        tableRows += `
          <tr>
            <td>Week ${weekNum}</td>
            <td><input type="checkbox"> Packet 1</td>
            <td><input type="checkbox"> Packet 2</td>
            <td><input type="checkbox"> Packet 3</td>
            <td><input type="checkbox"> Packet 4</td>
          </tr>
        `;
      }

      newTab.document.write(`
        <html>
          <head>
            <title>${title}</title>
            <style>
              body { font-family: Arial; padding: 20px; }
              table { width: 100%; border-collapse: collapse; margin-top: 20px; }
              td, th { border: 1px solid #ccc; padding: 8px; text-align: center; }
              th { background: #f0f0f0; }
              h3 { text-align: center; }
            </style>
          </head>
          <body>
            <h3>${title}</h3>
            <p><strong>Credits Needed:</strong> ${totalCredits}</p>
            <p><strong>Start Week:</strong> ${startWeek} &nbsp; <strong>End Week:</strong> ${endWeek}</p>
            <table>
              <thead>
                <tr><th>Week</th><th>Packet 1</th><th>Packet 2</th><th>Packet 3</th><th>Packet 4</th></tr>
              </thead>
              <tbody>
                ${tableRows}
              </tbody>
            </table>
            <script>window.print();<\/script>
          </body>
        </html>
      `);
      newTab.document.close();
    }

    function calculateCredits() {
      const totalCredits = parseInt(document.getElementById("totalCredits").value);
      const startWeek = parseInt(document.getElementById("startWeek").value);
      const endWeek = parseInt(document.getElementById("endWeek").value);
      const weeksRemaining = endWeek - startWeek + 1;

      if (!totalCredits || !weeksRemaining || weeksRemaining <= 0) {
        document.getElementById("result").innerText = "Please enter valid numbers.";
        return;
      }

      const weeklyAvg = (totalCredits / weeksRemaining).toFixed(2);
      const result = `
        <p><strong>Credits Needed:</strong> ${totalCredits}</p>
        <p><strong>Weeks Remaining:</strong> ${weeksRemaining}</p>
        <p><strong>Average Credits per Week:</strong> ${weeklyAvg}</p>
        <hr>
        <p><strong>Workflow Options:</strong></p>
        <ul>
          <li><strong>Plan A:</strong> 2 credits/week for ${Math.ceil(totalCredits / 2)} weeks
            <br><span class='plan-link' onclick="openPlanSchedule('Plan A', ${totalCredits}, ${startWeek}, ${endWeek})">üñ®Ô∏è Open Plan A Schedule</span></li>
        </ul>
      `;

      document.getElementById("result").innerHTML = result;
    }

    document.getElementById("calculateBtn").addEventListener("click", calculateCredits);
    document.addEventListener("keydown", function(event) {
      if (event.key === "Enter") {
        event.preventDefault();
        calculateCredits();
      }
    });
  </script>
</body>
</html>
