<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Weekly Credit Calculator</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f4f4f4;
      padding: 20px;
    }
    .container {
      max-width: 600px;
      margin: auto;
      background: white;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    h2 {
      text-align: center;
    }
    label {
      display: block;
      margin-top: 15px;
    }
    input[type=number] {
      width: 100%;
      padding: 8px;
      margin-top: 5px;
      border-radius: 6px;
      border: 1px solid #ccc;
    }
    button {
      margin-top: 15px;
      width: 100%;
      padding: 10px;
      border: none;
      background: #007bff;
      color: white;
      border-radius: 6px;
      font-size: 16px;
      cursor: pointer;
    }
    .output, .footer-disclaimer, .disclaimer {
      margin-top: 20px;
      padding: 10px;
      border-radius: 6px;
    }
    .output {
      background: #eef;
    }
    .disclaimer {
      background: #fff89a;
      border: 1px solid #ffeeba;
      font-size: 0.95em;
    }
    .footer-disclaimer {
      background: #eee;
      font-size: 0.9em;
      color: #333;
      text-align: center;
    }
    .warning {
      background: #ffeeba;
      border: 1px solid #f0ad4e;
      padding: 10px;
      margin-top: 10px;
      border-radius: 6px;
    }
    .plan-buttons {
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin-top: 10px;
    }
  </style>
</head>
<body>
<div class="container">
  <h2>Weekly Credit Calculator</h2>

  <div class="disclaimer">
    This calculator is designed for students who plan to graduate this school year.<br><br>
    If you’re planning to graduate next year or later, you can still use it to set a credit goal for the school year or semester.<br><br>
    Talk with your teacher to decide how many credits to aim for, then use that number in the calculator.
  </div>

  <label for="totalCredits">How many credits do you need to finish?</label>
  <input type="number" id="totalCredits" min="1" max="100" required>

  <label for="startWeek">What week are you starting from? (1–52)</label>
  <input type="number" id="startWeek" min="1" max="52" value="1">

  <label for="endWeek">Which week do you want to finish by? (1–52)</label>
  <input type="number" id="endWeek" min="1" max="52" value="46">

  <button onclick="calculateCredits()">Calculate</button>

  <div class="output" id="result"></div>

  <div class="plan-buttons" id="planButtons" style="display: none;">
    <button onclick="generatePlan('A')">🟢 Open Plan A</button>
    <button onclick="generatePlan('B')">🟡 Open Plan B</button>
    <button onclick="generatePlan('C')">🔵 Open Plan C</button>
    <button onclick="generatePlan('D')">🔴 Open Plan D</button>
  </div>

  <div class="footer-disclaimer">
    <strong>Disclaimer:</strong> This calculator is a helpful planning tool, but it's important to double-check your credit totals and the number of weeks you have. If you're not sure, talk with your teacher or school counselor to go over your plan.
  </div>
</div>

<script>
const dateRanges = [
  "", "July 1–4", "July 7–11", "July 14–18", "July 21–25", "July 28–Aug 1",
  "Aug 4–8", "Aug 11–15", "Aug 18–22", "Aug 25–29", "Sept 1–5", "Sept 8–12",
  "Sept 15–19", "Sept 22–26", "Sept 29–Oct 3", "Oct 6–10", "Oct 13–17", "Oct 20–24",
  "Oct 27–31", "Nov 3–7", "Nov 10–14", "Nov 17–21", "Nov 24–28", "Dec 1–5",
  "Dec 8–12", "Dec 15–19", "Dec 22–26", "Dec 29–Jan 2", "Jan 5–9", "Jan 12–16",
  "Jan 19–23", "Jan 26–30", "Feb 2–6", "Feb 9–13", "Feb 16–20", "Feb 23–27",
  "Mar 2–6", "Mar 9–13", "Mar 16–20", "Mar 23–27", "Mar 30–Apr 3", "Apr 6–10",
  "Apr 13–17", "Apr 20–24", "Apr 27–May 1", "May 4–8", "May 11–15", "May 18–22",
  "May 25–29", "June 1–5", "June 8–12", "June 15–19", "June 22–26", "June 29–30"
];

let storedPlan = {};

function calculateCredits() {
  const totalCredits = parseInt(document.getElementById("totalCredits").value);
  const startWeek = parseInt(document.getElementById("startWeek").value);
  const endWeek = parseInt(document.getElementById("endWeek").value);
  const weeksRemaining = endWeek - startWeek + 1;

  if (!totalCredits || !weeksRemaining || weeksRemaining <= 0) {
    document.getElementById("result").innerText = "Please enter valid numbers.";
    return;
  }

  const avg = (totalCredits / weeksRemaining).toFixed(2);
  const avgNum = parseFloat(avg);
  let suggestion = "", risk = "✅ Low Risk";

  if (avgNum <= 2.0) {
    suggestion = `✅ You’re on track! Aim to turn in 2 credits a week to stay steady and finish on time.`;
  } else if (avgNum <= 2.5) {
    suggestion = `⚠️ You’ll need to do a bit more than 2 each week. Try turning in 3 credits weekly to get ahead and lower your weekly credit load.`;
    risk = "⚠️ Medium Risk";
  } else if (avgNum <= 2.79) {
    suggestion = `⚠️ You’re getting close to the weekly credit limit of 3. Try turning in 3 credits a week now so you can lower your credit load and avoid burnout later.`;
    risk = "⚠️ Medium–High Risk";
  } else if (avgNum < 3.0) {
    suggestion = `⚠️ You’re getting very close to the weekly credit limit of 3. Try turning in 3 credits a week now so you can lower your credit load.`;
    risk = "⚠️ High Risk – Near Limit";
  } else {
    suggestion = `🚨 This plan needs 3 or more credits every week without any breaks. That’s a challenging pace. Talk with your teacher to build a plan with backup options.`;
    risk = "🚨 High Risk";
  }

  let buffer = "";
  if (endWeek === 46) buffer = `<div class="warning">⚠️ <strong>Heads up:</strong> You’re planning to finish right at the deadline. Try to finish by Week 44 or earlier to give yourself a buffer.</div>`;
  else if (endWeek === 45) buffer = `<div class="warning">⚠️ You’re finishing very close to the deadline. Try to end by Week 44 or earlier.</div>`;
  else if (endWeek > 46) buffer = `<div class="warning">⚠️ Week 46 is the last to turn in credits to walk. Talk with your teacher to make sure your plan still works.</div>`;

  const oneCreditWeeks = Math.max(0, Math.min(totalCredits, weeksRemaining, weeksRemaining * 2 - totalCredits));
  const planBWeeks = Math.floor(totalCredits / 3);
  const planBRem = totalCredits % 3;
  const planBText = planBRem === 0
    ? `3 credits/week for ${planBWeeks} weeks - (${planBWeeks} weeks total)`
    : `3 credits/week for ${planBWeeks} weeks + 1 week of ${planBRem} credit${planBRem > 1 ? "s" : ""} - (${planBWeeks + 1} weeks total)`;

  const planDText = (() => {
    const first = 8 * 3;
    const rem = Math.max(totalCredits - first, 0);
    const w4 = Math.floor(rem / 4);
    const r4 = rem % 4;
    return `3/week for 8 weeks (to unlock 4 credits/week), then ${w4} week(s) of 4/week${r4 ? ` + 1 week of ${r4} credit${r4 > 1 ? "s" : ""}` : ""} - (${8 + w4 + (r4 > 0 ? 1 : 0)} weeks total)`;
  })();

  document.getElementById("result").innerHTML = `
    <p><strong>Credits Needed:</strong> ${totalCredits}</p>
    <p><strong>Weeks Remaining:</strong> ${weeksRemaining}</p>
    <p><strong>Average Credits per Week:</strong> ${avg}</p>
    <p><strong>Risk Level:</strong> ${risk}</p>
    <p><strong>Suggestion:</strong> ${suggestion}</p>
    ${buffer}
    <hr>
    <p><strong>Workflow Options:</strong></p>
    <ul>
      <li><strong>Plan A:</strong> 2 credits/week for ${Math.ceil(totalCredits / 2)} weeks</li>
      <li><strong>Plan B:</strong> ${planBText}</li>
      <li><strong>Plan C:</strong> You can afford up to ${oneCreditWeeks} week(s) at 1 credit if the rest average 2+</li>
      <li><strong style="color:red;">Plan D (Special Approval Needed):</strong> ${planDText}</li>
    </ul>
  `;

  document.getElementById("planButtons").style.display = "block";
  storedPlan = { totalCredits, startWeek, endWeek, oneCreditWeeks };
}

function generatePlan(type) {
  const { totalCredits, startWeek, endWeek, oneCreditWeeks } = storedPlan;
  const weeks = endWeek - startWeek + 1;
  let weekPlan = [];

  if (type === 'A') weekPlan = Array(weeks).fill(2);
  if (type === 'B') {
    const full3 = Math.floor(totalCredits / 3);
    const rem = totalCredits % 3;
    weekPlan = [...Array(full3).fill(3)];
    if (rem > 0) weekPlan.push(rem);
  }
  if (type === 'C') {
    const twoWeeks = weeks - oneCreditWeeks;
    weekPlan = [...Array(twoWeeks).fill(2), ...Array(oneCreditWeeks).fill(1)];
  }
  if (type === 'D') {
    const part1 = Array(8).fill(3);
    const rem = totalCredits - 24;
    const w4 = Math.floor(rem / 4);
    const r4 = rem % 4;
    const part2 = Array(w4).fill(4);
    if (r4 > 0) part2.push(r4);
    weekPlan = [...part1, ...part2];
  }

  const table = `
    <html><head><title>Plan ${type} Credit Tracker</title>
    <style>
      body { font-family: Arial; padding: 20px; }
      table { border-collapse: collapse; width: 100%; }
      td, th { border: 1px solid #ccc; padding: 8px; text-align: center; }
      input[type="checkbox"] { transform: scale(1.2); margin-right: 6px; }
      .credit-cell { display: flex; align-items: center; gap: 6px; }
    </style></head><body>
    <h2>Credit Tracker – Plan ${type}</h2>
    <table><tr><th>Week</th><th>Date Range</th><th>Credits</th><th colspan="4">Packets</th></tr>
    ${weekPlan.map((credits, i) => {
      const weekNum = startWeek + i;
      const row = `<td>${weekNum}</td><td>${dateRanges[weekNum]}</td><td>${credits}</td>`;
      const cells = Array(4).fill(`<td><div class="credit-cell"><input type="checkbox" /> ________</div></td>`).join('');
      return `<tr>${row}${cells}</tr>`;
    }).join("")}
    </table></body></html>
  `;

  const printWin = window.open("", "_blank");
  printWin.document.write(table);
  printWin.document.close();
}
</script>
</body>
</html>
